<!DOCTYPE html>
<html lang="en-GB" manifest="webApp.appcache">
	<head>
		<meta charset="utf-8" />
		<title>Ben is a cool guy</title>
	</head>
	<body>
		<header>
			<h1>Ben is really dope</h1>
			<nav>
				<h1>Places to go</h1>
				<a href="#">Page 1</a>
				<a href="#">Page 2</a>
				<a href="#">Page 3</a>
			</nav>
		</header>
		<article>
			<header>
				<h1>Article about Ben's greatness</h1>
			</header>
			<section class="best-section">
				<h1>First reason</h1>
				<p>
					Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed tristique lorem id ante interdum, non ullamcorper dui venenatis. Nam porta ipsum nec tempus pharetra. Duis scelerisque, odio eget vulputate consequat, erat purus porta tellus, blandit eleifend ante arcu non nunc. Proin sit amet accumsan libero. Curabitur vulputate ipsum quis lectus lobortis, sit amet rutrum eros mollis. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Nunc massa nunc, porta at pharetra non, dictum eget diam.
				</p>
				<aside>
					<h1>Another thing to consider about Ben</h1>
					In a auctor nibh, at aliquet ante. Aliquam hendrerit nulla sit amet fermentum facilisis. Sed elit turpis, pulvinar venenatis ipsum id, fringilla vehicula lacus. Fusce molestie finibus tortor eget semper.
				</aside>
			</section>
			<section>
				<h1>Second reason</h1>
				<p>
					Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed tristique lorem id ante interdum, non ullamcorper dui venenatis. Nam porta ipsum nec tempus pharetra. Duis scelerisque, odio eget vulputate consequat, erat purus porta tellus, blandit eleifend ante arcu non nunc. Proin sit amet accumsan libero. Curabitur vulputate ipsum quis lectus lobortis, sit amet rutrum eros mollis. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Nunc massa nunc, porta at pharetra non, dictum eget diam.
				</p>
				<aside>
					<h1>Further Ben considerations</h1>
					In a auctor nibh, at aliquet ante. Aliquam hendrerit nulla sit amet fermentum facilisis. Sed elit turpis, pulvinar venenatis ipsum id, fringilla vehicula lacus. Fusce molestie finibus tortor eget semper.
				</aside>
			</section>
		</article>
		<article>
			<header>
				<h1>Article with picture of Ben</h1>
			</header>
			<figure>
				<img src="img/ben.jpg">
				<figcaption>
					The man himself.
				</figcaption>
			</figure>
		</article>
		<article>
			<header>
				<h1>Ben's Progress</h1>
			</header>
			<section class="best-section">
				<h1>Towards being a model human being</h1>
				<progress value="69" max="75"></progress>
				<p>Ben is getting <mark>extremely</mark> close</p>
			</section>
			<section>
				<h1>Towards the ethereal void</h1>
				<progress max="101"></progress>
				<p>Praise be unto him</p>
			</section>
		</article>
		<footer>
			<p>
				Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed tristique lorem id ante interdum, non ullamcorper dui venenatis.
			</p>
		</footer>
		<article id="target">
			<ul>
				<li>First</li>
				<li>Second</li>
				<li>Third</li>
				<li class="rip">Remove Me</li>
				<li class="rip">Also Remove Me</li>
				<li class="switch">Also Remove Me</li>
			</ul>
		</article>
		<article>
			<header>
				<h1>Clip of people enjoying Ben</h1>
			</header>
			<section>
				<h1>The Clip</h1>
				<video autoplay controls loop poster="img/ben.jpg" height="270" width="640" id="goodVideo">
					<source src="video/good.mp4" type="video/mp4">
					<object>
						<p>Video is not supported by this browser</p>
					</object>
				</video>
			</section>
			<section>
				<h1>Extra Controls</h1>
				<button onclick="video.play();">Play</button>
				<button onclick="video.pause();">Pause</button>
				<button onclick="video.forward();">Forward</button>
				<button onclick="video.back();">Back</button>
			</section>
		</article>
		<article>
			<header>
				<h1>Ben's sounds</h1>
			</header>
			<section>
				<h1>Sax</h1>
				<audio controls loop id="goodAudio">
					<source src="sound/sax.mp3">
					<object>
						<p>Audio is not supported by this browser</p>
					</object>
				</audio>
			</section>
			<section>
				<h1>Extra Controls</h1>
				<button onclick="audio.play();">Play</button>
				<button onclick="audio.pause();">Pause</button>
				<button onclick="audio.forward();">Forward</button>
				<button onclick="audio.back();">Back</button>
			</section>
		</article>
		<article>
			<header>
				<h1>Feelings about Ben expressed as Art</h1>
			</header>
			<section>
				<h1>"Summer Coveney" <small>by Ben Coveney</em></h1>
				<canvas id="picture1" width="600" height="400">
			</section>
			<section>
				<h1>"Scovable Benctor Graphics" <small>by Ben Coveney</em></h1>
				<svg width="600" height="400">
					<circle cx="50" cy="50" r="50", fill="green" onmouseover="Red(event)" onmouseout="Green(event)" />

					<rect x="100" y="100" width="60" height="200" fill="black" />
					<circle cx="129" cy="145" r="25" fill="red" />
					<circle cx="129" cy="205" r="25" fill="yellow" />
					<circle cx="129" cy="265" r="25" fill="green" />

					<polygon points="200,15 230,35 210,85 300,85 270,35 300,15" fill="purple" />

					<polyline points="10,150 30,170 50,132 60,196 78,165 96,170" style="stroke:orange; fill:none; stroke-width: 5;" />

					<line x1="200" y1="100" x2="200" y2="150" style="stroke: blue; stroke-width: 3;" />

					<ellipse cx="250" cy="150" rx="30" ry="55" fill="brown" />

					<text x="200" y="300" style="stroke: black; stroke-width: 1;">
						Has anyone really been far even as decided to use even go want to do look more like?
					</text>

					<image href="img/soapy.png" width="250" height="250" x="300"/>
				</svg>
			</section>
		</article>
		<article>
			<header>
				<h1>Visit Counter</h1>
			</header>
			<section id="sessionVisits">
				<h1>Session</h1>
				<span></span>
				<button onclick="clearSession();">Clear</button>
			</section>
			<section id="localVisits">
				<h1>Local</h1>
				<span></span>
				<button onclick="clearLocal();">Clear</button>
			</section>
			<section id="visitingFrom">
				<h1>Visiting From</h1>
				<span></span>
			</section>
		</article>
		<script>
			window.onload = function() {
				// DOM Querying -----------------------------------------

				// getElementById
				var list = document.getElementById("target");
				console.log(list.innerHTML);

				// getElementByClassName
				var sections = document.getElementsByClassName("best-section");
				console.log(sections);

				// getElementByTagName
				var headings = document.getElementsByTagName("p");
				console.log(headings.length);

				// querySelector
				var firstParagraph = document.querySelector("section > p");
				console.log(firstParagraph.innerHTML);

				// querySelectorAll
				var topHeadings = document.querySelectorAll("header > h1");
				console.log(topHeadings.length);

				for(var i = 0; i < topHeadings.length; i++) {
					console.log(topHeadings[i].innerHTML);
				}

				// DOM Hierarchy
				var unordered = list.querySelector("#target ul");
				console.log(unordered.childNodes.length);
				console.log(unordered.firstChild.data);
				console.log(unordered.lastChild.innerHTML);
				console.log(unordered.hasChildNodes());

				// DOM manipulation -----------------------------------------

				// removeChild
				var listItem = document.querySelector("#target ul li.rip");
				listItem.parentElement.removeChild(listItem);

				// remove, book recommends removeNode(true) but it is IE only
				listItem = document.querySelector("#target ul li.rip");
				listItem.remove();

				// createElement, appendChild
				var newItem = document.createElement("li");
				unordered.appendChild(newItem);
				newItem.innerHTML = "<em>OUTTA NOWHERE</em>";

				// insertBefore
				var anotherItem = unordered.insertBefore(document.createElement("li"), newItem);
				anotherItem.innerHTML = "<strong>R-r-r-rewind</strong>";

				// replaceChild, book recommends replaceNoe but it is IE only
				var firstListItem = document.querySelector("#target ul li");
				var replacementItem = document.createElement("li");
				unordered.replaceChild(replacementItem, firstListItem);
				replacementItem.innerHTML = "<mark>SwitcharooooooooOOOOOOOOOOOOO</mark>";

				// Canvas -----------------------------------------

				var canvas = document.getElementById("picture1");
				var context = canvas.getContext("2d");

				// Lines
				context.beginPath();
				context.moveTo(10, 10); // With pen up
				context.lineTo(255, 350); // With pen down
				context.lineTo(300, 10);
				context.lineTo(400, 350);
				context.lineWidth = 5;
				context.lineCap = "round";
				context.strokeStyle = "#88FF00";
				context.stroke(); // Create line

				// Curves
				// context.arc(centerX, centerY, radius, startAngle, endAngle, counterClockwise)
				context.beginPath();
				context.arc(150, 100, 75, 0, 2 * Math.PI, false);
				context.lineWidth = 24;
				context.strokeStyle = "#00FF88";
				context.stroke();

				context.beginPath();
				context.arc(450, 100, 75, 1.5 * Math.PI, 2 * Math.PI, false);
				context.lineWidth = 21;
				context.strokeStyle = "#0088FF";
				context.stroke();

				context.beginPath();
				context.arc(150, 300, 75, Math.PI, 1.5 * Math.PI, false);
				context.lineWidth = 18;
				context.strokeStyle = "#00FFFF";
				context.stroke();

				context.beginPath();
				context.arc(450, 300, 75, 0.5 * Math.PI, Math.PI, false);
				context.lineWidth = 15;
				context.strokeStyle = "#FF0000";
				context.stroke();

				// context.quadraticCurveTo(controlX, controlY, endX, endY)
				context.beginPath();
				context.moveTo(10, 380);
				context.quadraticCurveTo(300, -250, 580, 380);
				context.lineWidth = 12;
				context.strokeStyle = "#FF8800";
				context.stroke();

				// context.bezierCurveTo(control1X, control1Y, control2X, control2Y, endX, endY)
				context.beginPath();
				context.moveTo(125, 20);
				context.bezierCurveTo(0, 200, 300, 300, 50, 400);
				context.lineWidth = 9;
				context.strokeStyle = "#FF0088";
				context.stroke();

				// rect(x, y, width, height)
				context.beginPath();
				context.rect(300, 200, 150, 75);
				context.stroke();
				context.fillStyle = "#FFFF88";
				context.fill();

				// fillRect(x, y, width, height)
				context.fillStyle = "#FF88FF";
				context.fillRect(225, 125, 150, 75);

				// Linear gradient
				context.beginPath();
				context.rect(150, 150, 200, 125);
				var gradient = context.createLinearGradient(150, 150, 200, 125);
				gradient.addColorStop(0, "#000000");
				gradient.addColorStop(0.5, "#FF8888");
				gradient.addColorStop(1, "#FFFFFF");
				context.fillStyle = gradient;
				context.fill();

				// Radial gradient
				context.beginPath();
				context.rect(450, 150, 200, 125);
				var gradient = context.createRadialGradient(500, 200, 5, 550, 250, 100);
				gradient.addColorStop(0, "#000000");
				gradient.addColorStop(0.5, "#88FF88");
				gradient.addColorStop(1, "#FFFFFF");
				context.fillStyle = gradient;
				context.fill();

				// Images
				var image = new Image();
				image.src = "img/soapy.png";
				image.onload = function() {
					// Image fill style
					context.beginPath();
					context.rect(400, 225, 275, 200);
					var pattern = context.createPattern(image, "repeat");
					context.fillStyle = pattern;
					context.fill();

					// drawImage()
					context.drawImage(image, 0, 275, image.height / 2, image.width / 2)
				};

				// Text
				context.lineWidth = 1;
				context.strokeStyle = "#880088";
				context.strokeText("It's good", 100, 100);
				
				context.font = "24px arial";
				context.strokeText("It's really good", 100, 120);
				
				context.textAlign = "center";
				context.strokeStyle = "#008888";
				context.strokeText("It's great", 100, 150);
				
				context.fillStyle = "#888800";
				context.fillText("It's amazing", 100, 180);

				// Storage -----------------------------------------

				loadSession();
				loadLocal();

				// Location -----------------------------------------

				// getCurrentPosition
				var geolocation = window.navigator.geolocation;
				var geolocationOptions = {
					enableHighAccuracy: true,
					timeout: 45000
				};
				geolocation.getCurrentPosition(successPosition, errorPosition, geolocationOptions);

				// watchPosition
				var watcher;
				var clearWatch = function(position) {
					watchPosition(position);
					geolocation.clearWatch(watcher);
				}
				watcher = geolocation.watchPosition(clearWatch, errorPosition, geolocationOptions);
			}

			// AppCache -----------------------------------------

			var appCache = window.applicationCache;
			console.log(appCache);

			function cacheStatus() {
				switch (appCache.status) {
					case appCache.UNCACHED: // UNCACHED == 0
						console.log('UNCACHED');
						break;
					case appCache.IDLE: // IDLE == 1
						console.log('IDLE');
						break;
					case appCache.CHECKING: // CHECKING == 2
						console.log('CHECKING');
						break;
					case appCache.DOWNLOADING: // DOWNLOADING == 3
						console.log('DOWNLOADING');
						break;
					case appCache.UPDATEREADY:  // UPDATEREADY == 4
						console.log('UPDATEREADY');
						break;
					case appCache.OBSOLETE: // OBSOLETE == 5
						console.log('OBSOLETE');
						break;
					default:
						console.log('UKNOWN CACHE STATUS');
						break;
				};
			}

			cacheStatus();

			appCache.onchecking = cacheStatus;
			appCache.onnoupdate = cacheStatus;
			appCache.ondownloading = cacheStatus;
			appCache.onprogress = cacheStatus;
			appCache.oncached = cacheStatus;
			appCache.onupdateready = cacheStatus;
			appCache.onobsolete = cacheStatus;
			appCache.onerror = cacheStatus;

			//appCache.update();

			// Video Controls -----------------------------------------

			function getVideo() {
				return document.getElementById("goodVideo");
			}
			var video = {
				play: function() {
					getVideo().play();
				},
				pause: function() {
					getVideo().pause();
				},
				forward: function() {
					getVideo().currentTime += 5
				},
				back: function() {
					getVideo().currentTime -= 5;
				}
			}

			// Audio Controls -----------------------------------------

			function getAudio() {
				return document.getElementById("goodAudio");
			}
			var audio = {
				play: function() {
					getAudio().play();
				},
				pause: function() {
					getAudio().pause();
				},
				forward: function() {
					getAudio().currentTime += 0.5
				},
				back: function() {
					getAudio().currentTime -= 0.5;
				}
			}

			// SVG -----------------------------------------

			function Red(event) {
				var circle = event.target;
				circle.setAttribute("style", "fill: red");
			}

			function Green(event) {
				var circle = event.target;
				circle.setAttribute("style", "fill: green");
			}

			// Storage -----------------------------------------

			function clearSession() {
				sessionStorage.removeItem("visits");
				loadSession();
			}

			function loadSession() {
				var sessionElement = document.querySelector("#sessionVisits > span");
				var sessionCount = JSON.parse(sessionStorage.getItem("visits"));
				sessionCount = sessionCount ? sessionCount + 1 : 1;
				sessionElement.innerText = sessionCount;
				sessionStorage.setItem("visits", sessionCount);
			}

			function clearLocal() {
				localStorage.removeItem("visits");
				loadLocal();
			}

			function loadLocal() {
				var localElement = document.querySelector("#localVisits > span");
				var localCount = JSON.parse(window.localStorage.getItem("visits"));
				localCount = localCount ? localCount + 1 : 1;
				localElement.innerText = localCount;
				localStorage.setItem("visits", localCount);
			}

			// Storage -----------------------------------------

			function successPosition(position) {
				var visitingFrom = document.querySelector("#visitingFrom span");
				visitingFrom.innerText = "Latitude: " + position.coords.latitude + " Longitude: " + position.coords.longitude;
			}

			function errorPosition(error) {
				var visitingFrom = document.querySelector("#visitingFrom span");
				visitingFrom.innerText = "Error: " + error.message + " Code: " + error.code;
			}

			function watchPosition(position) {
				console.log("Latitude: " + position.coords.latitude + " Longitude: " + position.coords.longitude);
			}

			// General JS -----------------------------------------

			// Scope
			var naughtyGlobalVariable = "hello";
			function outer() {
				var scopedVariable = "hullo";
				function inner1() {
					var evenMoreScopedVariable = "hallo";
				}
				function inner2() {
					// Won't work.
					// console.log(evenMoreScopedVariable);
				}
				inner1()
				inner2()
			}
			outer();

			// Window
			console.log(this);
			
			// Objects -----------------------------------------

			// Provided
			console.log(Math.sqrt(144));
			console.log(new Array(1, 2, 3, 5, 7));

			// Wrappers on native types
			console.log("hello".indexOf("ll", 0));
			console.log((5).toExponential(2));

			// Custom
			var myCustomObject = {
				name: "Ben Coveney",
				coolness: 123456,
				howCool: function() {
					console.log(this.name + " has a coolness level of " + this.coolness);
				}
			}
			myCustomObject.howCool();

			// Class-like
			function MySickClass(name, sickness) {
				if (name) {
					this.name = name;
				}
				if (sickness) {
					this.sickness = sickness;
				}
			}
			MySickClass.prototype.name = "default guy";
			MySickClass.prototype.sickness = 0;
			MySickClass.prototype.howSick = function() {
				console.log(this.name + " has a sickness level of " + this.sickness);
			};
			(new MySickClass()).howSick();
			(new MySickClass("Ben Coveney", 123456)).howSick();

			// Inheritance - Object.create
			var mySickerInstance = Object.create(
				MySickClass.prototype, 
				{
					howSick: { 
						value: function() {
							console.log(this.name + " has a even sicker level of " + this.sickness);
						}
					},
					howAmazing: {
						value: function() {
							console.log(this.name + " is probably the most amazing guy");
						}
					}
				}
			);
			mySickerInstance.howSick();
			mySickerInstance.howAmazing();

			// Inheritance - Call through to base
			function MySickestClass(name, sickness) {
				MySickClass.call(this, name, sickness);
			}
			MySickestClass.prototype = Object.create(MySickClass.prototype);
			MySickestClass.prototype.howSick = function() {
				console.log(this.name + " is literally the sickest dude");
			}
			var mySickestInstance = new MySickestClass("Ben Coveney", 5552525255525252);
			mySickestInstance.howSick();
			
			// Program Flow -----------------------------------------

			// Branching flow
			if ("1" == 2) {
				console.log("a");
			} else if ("2" == 2) {
				console.log("b");
			} else {
				console.log("c");
			}

			var target = "second";
			switch (target) {
				case "first":
					console.log("1st");
					break;
				case "second":
					console.log("2nd");
					break;
				case "third":
					console.log("3rd");
					break;
				default:
					console.log("??!??!!?!??!!!??!");
					break;
			}

			console.log("hello" === "goodbye" ? "hi" : "cya");

			// Array methods
			var animals = new Array("dogs", "cats", "cows", "chickens");
			var animalSounds = ["woof", "meow", "moo", "cluck"];
			animalSounds.sort();
			
			console.log(animals[2]);
			console.log(animals.length);

			var moreAnimals = animals.concat(["lizards", "pigs"]);
			console.log(moreAnimals);

			console.log(moreAnimals.indexOf("cows"));
			console.log(moreAnimals.lastIndexOf("cows"));
			console.log(moreAnimals.join(", "));
			console.log(moreAnimals.reverse());

			animalSounds.sort();
			console.log(animalSounds);

			console.log(moreAnimals.slice(1, 3)); // Exclusive last param
			console.log(moreAnimals.splice(1, 2, "fish", "sheep", "salmon")); // Inclusive last param. extracted items returned.
			console.log(moreAnimals);

			// Special array types
			var cars = ["BMW", "Ferrari", "Peugeot", "Skoda", "Vauxhaul", "Fiat"];
			console.log(cars);

			console.log(cars.pop());
			cars.push("Audi");

			console.log(cars.shift());
			cars.unshift("Jeep");

			console.log(cars);

			// Advanced array methods
			var numbersToTen = new Array(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10);

			function isEven(value, index, array) {
				return value % 2 == 0;
			}

			console.log(numbersToTen.every(isEven, this));
			console.log(numbersToTen.some(isEven, this));
			numbersToTen.forEach(function(value, index, array) {
				console.log("Value: " + value + " @: " + index);
			});
			console.log(numbersToTen.filter(isEven));
			console.log(numbersToTen.map(function(value) {
				return value + 10;
			}));
			console.log(
				numbersToTen.reduce(
					function(previous, current) {
						return previous + current;
					},
					-100
				)
			);

			// Iterative flow -----------------------------------------
			for(var i = 0; i < 5; i++)
			{
				console.log(i);
			}

			var address = {
				firstName: "Ben",
				lastName: "Coveney",
				houseNumber: "1337",
				street: "Roady Street",
				town: "Townham on Town"
			};
			
			for(var addressPart in address)
			{
				console.log(addressPart + ": " + address[addressPart]);
			}

			var j = 0;
			while(j < 5)
			{
				console.log(j);
				j++;
			}

			var k = 0;
			do
			{
				console.log(k);
				k++;
			}
			while(k < 5);

			for(var l = 0; l < 10; l++)
			{
				if (l % 2 == 0)
				{
					continue;
				}
				if (l > 8)
				{
					break;
				}
				console.log(l);
			}
		</script>
	</body>
</html>